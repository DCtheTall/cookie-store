<!DOCTYPE html>
<html>
  <head>
    <title>🍪 cookies_test</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <script charset="UTF-8">
      /*<!--*/
      // This is intentionally written in an archaic and portable style as it may be the
      // only script able to parse and run in an older browser.
      self.onerror = function(msg, url, ln, col, error) {
        console.error('Global onerror: %s at %s#ln=%s&col=%s %o', msg, url, ln, col, error);
        var errorNode = document.createElement('pre');
        errorNode.appendChild(document.createTextNode([
          'Global onerror: ' + msg,
          'URL: ' + url,
          'Line: ' + ln,
          'Column: ' + col,
          'Error: ' + error].join('\n')));
        (document.body || document.documentElement || document.head).appendChild(errorNode);
        return true;
      };
      /*-->*/
    </script>
    <script charset="UTF-8" src="cookies.js"></script>
    <script charset="UTF-8" src="cookies_test.js"></script>
  </head>
  <body>
    <h1>🍪 cookies_test</h1>
    <noscript><b>Note:</b> this website will not work when scripts are not allowed.</noscript>
    <p><b>Cookies:</b> this website uses HTTP cookies - small files stored on your
    computer and automatically sent with subsequent HTTP requests - to demonstrate and exercise
    an <a href="https://github.com/WICG/async-cookies-api">asynchronous cookie API for scripts</a>.
    Some cookies may persist even after your browsing session is ended and may continue to
    be sent in future browsing sessions.
    If you click or otherwise activate any buttons on this website you indicate your acceptance of and
    consent to all of this website's uses of cookies in your web browser now and in the future.</p>
    <button style="visibility: hidden" id="run-tests-button"><span id="tests-status-indicator"></span> Accept this
    website's use of cookies and run tests</button>
    <p>This should be more interesting with the developer tools JS console open.
    At present this requires a recent development version of Google Chrome or Chromium with the Experimental JavaScript
    flag active - type <tt>chrome://flags/#enable-javascript-harmony</tt> into the address bar to
    check the value of that flag and change it if desired.</p>
    <p>The <a href="https://github.com/WICG/async-cookies-api/blob/gh-pages/cookies.js">document-based
    polyfill</a> included by this page runs best in an https page 🔒 - the polyfill
    is also usable but some tests fail when run in an unsecured http page 🔓 due
    to its reliance on <tt>Secure</tt> cookie access.</p>
    <button style="visibility: hidden" id="toggle-https-button"><span
    id="https-status-indicator"></span> Toggle https</button>
    <p>See <a
    href="https://github.com/WICG/async-cookies-api">https://github.com/WICG/async-cookies-api</a> for
    an explanation of the API.</p>
  </body>
</html>
